const h={data(){return{search:"",sortBy:null,sortDirection:"asc",loading:!1,saving:!1,activeOptions:[{title:"Active",value:!0},{title:"Inactive",value:!1}]}},methods:{showSuccess(t){window.Toast?window.Toast.fire({icon:"success",title:t}):alert(t)},showError(t){window.Toast?window.Toast.fire({icon:"error",title:t}):alert(t)},formatDate(t){return t?new Date(t).toLocaleDateString():"-"},formatDateTime(t){return t?new Date(t).toLocaleString():"-"},formatDateDDMMYYYY(t){if(!t)return"";try{if(typeof t=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(t)){const[r,a,o]=t.split("-");return`${o}/${a}/${r}`}const e=new Date(t);if(isNaN(e.getTime()))return"";const s=String(e.getDate()).padStart(2,"0"),i=String(e.getMonth()+1).padStart(2,"0"),n=e.getFullYear();return`${s}/${i}/${n}`}catch{return t}},formatDateDDMMYYYYHHMM(t){if(!t)return"";try{const e=new Date(t);if(isNaN(e.getTime()))return"";const s=String(e.getDate()).padStart(2,"0"),i=String(e.getMonth()+1).padStart(2,"0"),n=e.getFullYear(),r=String(e.getHours()).padStart(2,"0"),a=String(e.getMinutes()).padStart(2,"0");return`${s}/${i}/${n} ${r}:${a}`}catch{return t}},formatDateShort(t){if(!t)return"-";try{const e=new Date(t);if(isNaN(e.getTime()))return"-";const s=String(e.getDate()).padStart(2,"0"),i=String(e.getMonth()+1).padStart(2,"0"),n=e.getFullYear();let r=e.getHours();const a=String(e.getMinutes()).padStart(2,"0"),o=r>=12?"PM":"AM";r=r%12,r=r||12;const c=String(r).padStart(2,"0");return`${s}/${i}/${n} ${c}:${a} ${o}`}catch{return t}},getAuthToken(){return localStorage.getItem("admin_token")},getAuthHeaders(){return{Authorization:`Bearer ${this.getAuthToken()}`}},handleApiError(t,e="An error occurred"){var i,n,r,a;console.error("API Error:",t);let s=e;if((n=(i=t.response)==null?void 0:i.data)!=null&&n.errors){const o=t.response.data.errors,c=[];Object.keys(o).forEach(u=>{Array.isArray(o[u])?c.push(`${u}: ${o[u][0]}`):c.push(`${u}: ${o[u]}`)}),s=c.join(`
`)}else(a=(r=t.response)==null?void 0:r.data)!=null&&a.message?s=t.response.data.message:t.message&&(s=t.message);this.showError(s)},handleSort(t){this.sortBy===t?this.sortDirection=this.sortDirection==="asc"?"desc":"asc":(this.sortBy=t,this.sortDirection="asc")},getSortIcon(t){return this.sortBy!==t?"mdi-sort":this.sortDirection==="asc"?"mdi-sort-ascending":"mdi-sort-descending"},resetSorting(){this.sortBy=null,this.sortDirection="asc"},customValueSet(t,e){this.filters&&Object.prototype.hasOwnProperty.call(this.filters,t)?this.filters[t]=e:Object.prototype.hasOwnProperty.call(this,t)&&(this[t]=e)},isSortingBy(t){return this.sortBy===t},getSortDirection(t){return this.sortBy===t?this.sortDirection:null},openDialog(t){this.editingItem!==void 0&&(this.editingItem=t),this.dialog!==void 0&&(this.dialog=!0)},openViewDialog(t){this.selectedItem!==void 0&&(this.selectedItem=t),this.viewDialog!==void 0&&(this.viewDialog=!0)},async deleteItem(t,e={}){const{apiEndpoint:s,itemName:i="item",itemLabel:n=t.name||t.title||"this item",successMessage:r=`${i.charAt(0).toUpperCase()+i.slice(1)} deleted successfully`,errorMessage:a=`Error deleting ${i}`,onSuccess:o,beforeDelete:c}=e;if(!(c&&typeof c=="function"&&await c(t)===!1)&&confirm(`Are you sure you want to delete ${n}?`))try{await this.$axios.delete(`${s}/${t.id}`,{headers:this.getAuthHeaders()}),this.showSuccess(r),o&&typeof o=="function"&&await o()}catch(u){this.handleApiError(u,a)}}}};export{h as c};
