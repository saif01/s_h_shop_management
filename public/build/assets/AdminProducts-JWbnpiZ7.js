import{_ as E,i as w,d as v,w as l,a as o,r as u,b as i,t as d,c as g,F as O,h as q,e as x,f as c,o as r,l as M}from"./app-B76V_J0T.js";const T={name:"ProductDialog",props:{modelValue:{type:Boolean,required:!0},product:{type:Object,default:null}},emits:["update:modelValue","saved"],data(){return{form:this.getEmptyForm(),formValid:!1,saving:!1,categoryOptions:[],unitOptions:[],warehouseOptions:[],stockByWarehouse:[],stockFormValid:!1,adjustingStock:!1,stockAdjustment:{warehouse_id:null,quantity:0,unit_cost:null,adjustment_type:"set",notes:""},adjustmentTypeOptions:[{value:"set",label:"Set Quantity"},{value:"add",label:"Add Stock"},{value:"subtract",label:"Subtract Stock"}],rules:{required:s=>!!s||"Required",positiveNumber:s=>s!=null&&s>=0||"Must be 0 or greater"}}},computed:{isEdit(){return!!this.form.id}},watch:{product:{immediate:!0,async handler(s){this.form=s?{...this.getEmptyForm(),...s}:this.getEmptyForm(),s&&s.id?await this.loadProductStock(s.id):this.stockByWarehouse=[]}}},created(){this.fetchOptions()},methods:{getEmptyForm(){return{id:null,name:"",sku:"",barcode:"",brand:"",category_id:null,unit_id:null,description:"",image:"",purchase_price:0,sale_price:0,tax_rate:0,minimum_stock_level:0,is_active:!0}},async fetchOptions(){try{const[s,e,p]=await Promise.all([w.get("/api/v1/products/categories"),w.get("/api/v1/products/units"),w.get("/api/v1/products/warehouses")]);this.categoryOptions=s.data.categories||[],this.unitOptions=e.data.units||[],this.warehouseOptions=p.data.warehouses||[]}catch(s){console.error("Failed to load options",s)}},async loadProductStock(s){try{const e=await w.get(`/api/v1/products/${s}`);e.data&&e.data.stock_by_warehouse?this.stockByWarehouse=e.data.stock_by_warehouse:this.stockByWarehouse=[]}catch(e){console.error("Failed to load product stock",e),this.stockByWarehouse=[]}},generateSKU(){let s="";if(this.form.name&&this.form.name.trim()){const p=this.form.name.trim().toUpperCase().split(/\s+/).map(t=>t.substring(0,2)).join("").substring(0,4),k=Date.now().toString().slice(-6);s=`${p}-${k}`}else{const e="PROD",p=Math.random().toString(36).substring(2,8).toUpperCase();s=`${e}-${p}`}this.form.sku=s},close(){this.$emit("update:modelValue",!1)},async save(){var e;if(await this.$refs.formRef.validate()){this.saving=!0;try{const p={...this.form};if(delete p.stock_by_warehouse,this.isEdit){const k=await w.put(`/api/v1/products/${this.form.id}`,p);k.data&&k.data.stock_by_warehouse&&(this.stockByWarehouse=k.data.stock_by_warehouse)}else await w.post("/api/v1/products",p);this.$emit("saved"),this.close()}catch(p){console.error("Failed to save product",p),(e=this.$toast)==null||e.error("Failed to save product")}finally{this.saving=!1}}},getStockStatusColor(s){return this.form.minimum_stock_level?s<=0?"error":s<=this.form.minimum_stock_level?"warning":"success":"default"},async adjustStock(){var e,p,k,t,m,b,V;if(await((e=this.$refs.stockFormRef)==null?void 0:e.validate())){if(!this.stockAdjustment.warehouse_id){(p=this.$toast)==null||p.error("Please select a warehouse");return}this.adjustingStock=!0;try{const h={product_id:this.form.id,warehouse_id:this.stockAdjustment.warehouse_id,quantity:this.stockAdjustment.quantity,adjustment_type:this.stockAdjustment.adjustment_type,unit_cost:this.stockAdjustment.unit_cost||null,notes:this.stockAdjustment.notes||"Manual stock adjustment"};await w.post("/api/v1/stocks",h);const _=await w.get(`/api/v1/products/${this.form.id}`);_.data&&(this.form={...this.getEmptyForm(),..._.data},_.data.stock_by_warehouse&&(this.stockByWarehouse=_.data.stock_by_warehouse)),this.stockAdjustment={warehouse_id:null,quantity:0,unit_cost:null,adjustment_type:"set",notes:""},(k=this.$refs.stockFormRef)==null||k.resetValidation(),(t=this.$toast)==null||t.success("Stock adjusted successfully"),this.$emit("saved")}catch(h){console.error("Failed to adjust stock",h);const _=((b=(m=h.response)==null?void 0:m.data)==null?void 0:b.message)||"Failed to adjust stock";(V=this.$toast)==null||V.error(_)}finally{this.adjustingStock=!1}}}}},W={class:"text-h6 font-weight-medium"},N={key:0},R={class:"font-weight-medium"},K={key:0,class:"text-caption text-grey ml-1"},I={class:"text-end"},Q={class:"text-end"},L={class:"text-end"},G={key:1,class:"text-center text-grey py-2"};function Y(s,e,p,k,t,m){const b=u("v-btn"),V=u("v-card-title"),h=u("v-divider"),_=u("v-text-field"),f=u("v-col"),j=u("v-switch"),S=u("v-select"),A=u("v-textarea"),P=u("v-row"),y=u("v-form"),B=u("v-chip"),z=u("v-table"),F=u("v-card-text"),C=u("v-card"),D=u("v-alert"),n=u("v-card-actions"),U=u("v-dialog");return r(),v(U,{"model-value":p.modelValue,"onUpdate:modelValue":e[20]||(e[20]=a=>s.$emit("update:modelValue",a)),"max-width":"700px",persistent:"",scrollable:""},{default:l(()=>[o(C,{class:"product-dialog"},{default:l(()=>[o(V,{class:"dialog-header d-flex justify-space-between align-center pa-3"},{default:l(()=>[i("span",W,d(m.isEdit?"Edit Product":"Add Product"),1),o(b,{icon:"mdi-close",variant:"text",size:"small",onClick:m.close},null,8,["onClick"])]),_:1}),o(h),o(F,{class:"pa-3"},{default:l(()=>[o(y,{ref:"formRef",modelValue:t.formValid,"onUpdate:modelValue":e[13]||(e[13]=a=>t.formValid=a),"lazy-validation":""},{default:l(()=>[o(P,{dense:"",class:"ma-0"},{default:l(()=>[o(f,{cols:"12",sm:"8",class:"pa-2"},{default:l(()=>[o(_,{modelValue:t.form.name,"onUpdate:modelValue":e[0]||(e[0]=a=>t.form.name=a),label:"Product Name",rules:[t.rules.required],density:"compact",variant:"outlined","hide-details":"auto"},null,8,["modelValue","rules"])]),_:1}),o(f,{cols:"12",sm:"4",class:"pa-2 d-flex align-center"},{default:l(()=>[o(j,{modelValue:t.form.is_active,"onUpdate:modelValue":e[1]||(e[1]=a=>t.form.is_active=a),inset:"",label:"Active",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),o(f,{cols:"12",sm:"6",class:"pa-2"},{default:l(()=>[o(_,{modelValue:t.form.sku,"onUpdate:modelValue":e[2]||(e[2]=a=>t.form.sku=a),label:"SKU",density:"compact",variant:"outlined","hide-details":""},{"append-inner":l(()=>[o(b,{icon:"mdi-refresh",size:"x-small",variant:"text",onClick:m.generateSKU,title:"Generate SKU"},null,8,["onClick"])]),_:1},8,["modelValue"])]),_:1}),o(f,{cols:"12",sm:"6",class:"pa-2"},{default:l(()=>[o(_,{modelValue:t.form.barcode,"onUpdate:modelValue":e[3]||(e[3]=a=>t.form.barcode=a),label:"Barcode",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),o(f,{cols:"12",sm:"6",class:"pa-2"},{default:l(()=>[o(_,{modelValue:t.form.brand,"onUpdate:modelValue":e[4]||(e[4]=a=>t.form.brand=a),label:"Brand",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),o(f,{cols:"12",sm:"6",class:"pa-2"},{default:l(()=>[o(_,{modelValue:t.form.image,"onUpdate:modelValue":e[5]||(e[5]=a=>t.form.image=a),label:"Image URL",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),o(f,{cols:"12",sm:"6",class:"pa-2"},{default:l(()=>[o(S,{modelValue:t.form.category_id,"onUpdate:modelValue":e[6]||(e[6]=a=>t.form.category_id=a),items:t.categoryOptions,"item-value":"value","item-title":"label",label:"Category",clearable:"",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue","items"])]),_:1}),o(f,{cols:"12",sm:"6",class:"pa-2"},{default:l(()=>[o(S,{modelValue:t.form.unit_id,"onUpdate:modelValue":e[7]||(e[7]=a=>t.form.unit_id=a),items:t.unitOptions,"item-value":"value","item-title":"label",label:"Unit",clearable:"",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue","items"])]),_:1}),o(f,{cols:"12",sm:"6",class:"pa-2"},{default:l(()=>[o(_,{modelValue:t.form.purchase_price,"onUpdate:modelValue":e[8]||(e[8]=a=>t.form.purchase_price=a),modelModifiers:{number:!0},label:"Purchase Price",type:"number",min:"0",step:"0.01",rules:[t.rules.required],density:"compact",variant:"outlined","hide-details":"auto"},null,8,["modelValue","rules"])]),_:1}),o(f,{cols:"12",sm:"6",class:"pa-2"},{default:l(()=>[o(_,{modelValue:t.form.sale_price,"onUpdate:modelValue":e[9]||(e[9]=a=>t.form.sale_price=a),modelModifiers:{number:!0},label:"Sale Price",type:"number",min:"0",step:"0.01",rules:[t.rules.required],density:"compact",variant:"outlined","hide-details":"auto"},null,8,["modelValue","rules"])]),_:1}),o(f,{cols:"12",sm:"6",class:"pa-2"},{default:l(()=>[o(_,{modelValue:t.form.tax_rate,"onUpdate:modelValue":e[10]||(e[10]=a=>t.form.tax_rate=a),modelModifiers:{number:!0},label:"VAT/Tax (%)",type:"number",min:"0",step:"0.01",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),o(f,{cols:"12",sm:"6",class:"pa-2"},{default:l(()=>[o(_,{modelValue:t.form.minimum_stock_level,"onUpdate:modelValue":e[11]||(e[11]=a=>t.form.minimum_stock_level=a),modelModifiers:{number:!0},label:"Minimum Stock Alert",type:"number",min:"0",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),o(f,{cols:"12",class:"pa-2"},{default:l(()=>[o(A,{modelValue:t.form.description,"onUpdate:modelValue":e[12]||(e[12]=a=>t.form.description=a),label:"Description",rows:"2",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(h,{class:"my-3"}),e[25]||(e[25]=i("div",{class:"text-subtitle-2 font-weight-medium mb-2"},"Stock by Warehouse",-1)),o(C,{variant:"outlined",class:"mb-2"},{default:l(()=>[o(F,{class:"pa-2"},{default:l(()=>[t.stockByWarehouse&&t.stockByWarehouse.length>0?(r(),g("div",N,[o(z,{density:"compact"},{default:l(()=>[e[21]||(e[21]=i("thead",null,[i("tr",null,[i("th",null,"Warehouse"),i("th",{class:"text-end"},"Quantity"),i("th",{class:"text-end"},"Avg Cost"),i("th",{class:"text-end"},"Total Value")])],-1)),i("tbody",null,[(r(!0),g(O,null,q(t.stockByWarehouse,a=>(r(),g("tr",{key:a.warehouse_id},[i("td",null,[i("span",R,d(a.warehouse_name),1),a.warehouse_code?(r(),g("span",K," ("+d(a.warehouse_code)+") ",1)):x("",!0)]),i("td",I,[o(B,{size:"small",color:m.getStockStatusColor(a.quantity),variant:"tonal"},{default:l(()=>[c(d(a.quantity||0),1)]),_:2},1032,["color"])]),i("td",Q,"৳"+d(parseFloat(a.average_cost||0).toFixed(2)),1),i("td",L,"৳"+d(parseFloat(a.total_value||0).toFixed(2)),1)]))),128))])]),_:1,__:[21]})])):(r(),g("div",G,e[22]||(e[22]=[i("span",{class:"text-caption"},"No stock information available",-1)])))]),_:1})]),_:1}),o(h,{class:"my-3"}),e[26]||(e[26]=i("div",{class:"text-subtitle-2 font-weight-medium mb-2"},"Adjust Stock",-1)),o(C,{variant:"outlined",class:"mb-2"},{default:l(()=>[o(F,{class:"pa-2"},{default:l(()=>[o(y,{ref:"stockFormRef",modelValue:t.stockFormValid,"onUpdate:modelValue":e[19]||(e[19]=a=>t.stockFormValid=a),"lazy-validation":""},{default:l(()=>[o(P,{dense:"",class:"ma-0"},{default:l(()=>[o(f,{cols:"12",sm:"4",class:"pa-2"},{default:l(()=>[o(S,{modelValue:t.stockAdjustment.warehouse_id,"onUpdate:modelValue":e[14]||(e[14]=a=>t.stockAdjustment.warehouse_id=a),items:t.warehouseOptions,"item-value":"value","item-title":"label",label:"Warehouse",clearable:"",density:"compact",variant:"outlined","hide-details":"auto",rules:[t.rules.required]},null,8,["modelValue","items","rules"])]),_:1}),o(f,{cols:"12",sm:"3",class:"pa-2"},{default:l(()=>[o(S,{modelValue:t.stockAdjustment.adjustment_type,"onUpdate:modelValue":e[15]||(e[15]=a=>t.stockAdjustment.adjustment_type=a),items:t.adjustmentTypeOptions,"item-value":"value","item-title":"label",label:"Type",density:"compact",variant:"outlined","hide-details":"auto",rules:[t.rules.required]},null,8,["modelValue","items","rules"])]),_:1}),o(f,{cols:"12",sm:"3",class:"pa-2"},{default:l(()=>[o(_,{modelValue:t.stockAdjustment.quantity,"onUpdate:modelValue":e[16]||(e[16]=a=>t.stockAdjustment.quantity=a),modelModifiers:{number:!0},label:"Quantity",type:"number",min:"0",density:"compact",variant:"outlined","hide-details":"auto",rules:[t.rules.required,t.rules.positiveNumber]},null,8,["modelValue","rules"])]),_:1}),o(f,{cols:"12",sm:"2",class:"pa-2 d-flex align-end"},{default:l(()=>[o(b,{color:"primary",size:"small",loading:t.adjustingStock,onClick:m.adjustStock,disabled:!m.isEdit},{default:l(()=>e[23]||(e[23]=[c(" Adjust ")])),_:1,__:[23]},8,["loading","onClick","disabled"])]),_:1}),o(f,{cols:"12",sm:"4",class:"pa-2"},{default:l(()=>[o(_,{modelValue:t.stockAdjustment.unit_cost,"onUpdate:modelValue":e[17]||(e[17]=a=>t.stockAdjustment.unit_cost=a),modelModifiers:{number:!0},label:"Unit Cost (Optional)",type:"number",min:"0",step:"0.01",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),o(f,{cols:"12",sm:"8",class:"pa-2"},{default:l(()=>[o(_,{modelValue:t.stockAdjustment.notes,"onUpdate:modelValue":e[18]||(e[18]=a=>t.stockAdjustment.notes=a),label:"Notes (Optional)",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),m.isEdit?x("",!0):(r(),v(D,{key:0,type:"info",density:"compact",variant:"tonal",class:"mt-2"},{default:l(()=>e[24]||(e[24]=[c(" Save the product first to adjust stock ")])),_:1,__:[24]}))]),_:1})]),_:1})]),_:1,__:[25,26]}),o(h),o(n,{class:"pa-2 justify-end"},{default:l(()=>[o(b,{variant:"text",size:"small",onClick:m.close},{default:l(()=>e[27]||(e[27]=[c("Cancel")])),_:1,__:[27]},8,["onClick"]),o(b,{color:"primary",size:"small",loading:t.saving,onClick:m.save},{default:l(()=>[c(d(m.isEdit?"Update":"Save"),1)]),_:1},8,["loading","onClick"])]),_:1})]),_:1})]),_:1},8,["model-value"])}const H=E(T,[["render",Y],["__scopeId","data-v-e4e776f4"]]),J={data(){return{sortByField:"name",sortDirection:"asc"}},methods:{sortBy(s){this.sortByField===s?this.sortDirection=this.sortDirection==="asc"?"desc":"asc":(this.sortByField=s,this.sortDirection="asc"),this.onSortChange&&typeof this.onSortChange=="function"&&this.onSortChange(this.sortByField,this.sortDirection)},getSortParams(){return{sort_by:this.sortByField,sort_direction:this.sortDirection}},isSortingBy(s){return this.sortByField===s},getSortDirection(s){return this.sortByField===s?this.sortDirection:null},resetSort(){this.sortByField="name",this.sortDirection="asc",this.onSortChange&&typeof this.onSortChange=="function"&&this.onSortChange(this.sortByField,this.sortDirection)}}},X={name:"AdminProducts",components:{ProductDialog:H},mixins:[J],data(){return{products:[],loading:!1,search:"",categoryOptions:[],categoryFilter:null,activeOptions:[{title:"Active",value:!0},{title:"Inactive",value:!1}],activeFilter:null,dialog:!1,editingProduct:null,pagination:{current_page:1,per_page:15,last_page:1,total:0},perPageOptions:[{title:"10",value:10},{title:"15",value:15},{title:"25",value:25},{title:"50",value:50},{title:"100",value:100}]}},mounted(){this.loadOptions(),this.loadProducts()},methods:{async loadOptions(){try{const{data:s}=await w.get("/api/v1/products/categories");this.categoryOptions=s.categories||[]}catch(s){console.error("Failed to load categories",s)}},async loadProducts(){this.loading=!0;try{const s={page:this.pagination.current_page,per_page:this.pagination.per_page,...this.getSortParams()};this.search&&(s.search=this.search),this.categoryFilter&&(s.category_id=this.categoryFilter),this.activeFilter!==null&&(s.is_active=this.activeFilter);const{data:e}=await w.get("/api/v1/products",{params:s});this.products=e.data||[],this.pagination={current_page:e.current_page||1,per_page:e.per_page||15,last_page:e.last_page||1,total:e.total||0}}catch(s){console.error("Failed to load products",s),this.showError("Failed to load products")}finally{this.loading=!1}},onSortChange(){this.pagination.current_page=1,this.loadProducts()},openDialog(s){this.editingProduct=s,this.dialog=!0},async deleteProduct(s){var p,k;if((await window.Swal.fire({title:"Are you sure?",text:`Do you want to delete product ${s.name}?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"})).isConfirmed)try{await w.delete(`/api/v1/products/${s.id}`),this.showSuccess("Product deleted successfully"),this.loadProducts()}catch(t){console.error("Failed to delete product",t),this.showError(((k=(p=t.response)==null?void 0:p.data)==null?void 0:k.message)||"Failed to delete product")}},onPerPageChange(){this.pagination.current_page=1,this.loadProducts()},resetFilters(){this.search="",this.categoryFilter=null,this.activeFilter=null,this.pagination.current_page=1,this.loadProducts()},onSearchChange(){this.pagination.current_page=1,this.loadProducts()},onFilterChange(){this.pagination.current_page=1,this.loadProducts()},showSuccess(s){window.Toast?window.Toast.fire({icon:"success",title:s}):window.Swal?window.Swal.fire({icon:"success",title:s,timer:2e3,showConfirmButton:!1}):alert(s)},showError(s){window.Toast?window.Toast.fire({icon:"error",title:s}):window.Swal?window.Swal.fire({icon:"error",title:s}):alert(s)},getStockStatusColor(s){const e=s.stock_quantity||0,p=s.minimum_stock_level||0;return e<=0?"error":p>0&&e<=p?"warning":"success"}}},Z={class:"page-header"},$={class:"text-caption text-grey"},ee={key:0},te={key:0,class:"text-center py-4"},oe={class:"sortable-header"},se={class:"sortable-header"},le={class:"sortable-header justify-end"},ie={class:"sortable-header justify-end"},ae={class:"sortable-header justify-end"},ne={class:"sortable-header"},re={class:"font-weight-medium"},de={class:"text-end"},ue={class:"text-end"},ce={class:"text-end"},me={class:"text-caption"},pe={class:"text-end"},_e={key:0},fe={class:"d-flex flex-column flex-md-row justify-space-between align-center align-md-start gap-3 mt-4"},ge={class:"text-caption text-grey"},ve={key:0},ye={key:0,class:"ml-2"},he={key:1},ke={key:0,class:"d-flex align-center gap-2"};function be(s,e,p,k,t,m){const b=u("v-btn"),V=u("v-select"),h=u("v-col"),_=u("v-text-field"),f=u("v-row"),j=u("v-card-text"),S=u("v-card"),A=u("v-card-title"),P=u("v-progress-circular"),y=u("v-icon"),B=u("v-chip"),z=u("v-tooltip"),F=u("v-table"),C=u("v-pagination"),D=u("product-dialog");return r(),g("div",null,[i("div",Z,[e[14]||(e[14]=i("h1",{class:"text-h4 page-title"},"Products",-1)),o(b,{color:"primary","prepend-icon":"mdi-plus",onClick:e[0]||(e[0]=n=>m.openDialog(null)),class:"add-button"},{default:l(()=>e[13]||(e[13]=[c(" Add Product ")])),_:1,__:[13]})]),o(S,{class:"mb-4"},{default:l(()=>[o(j,null,{default:l(()=>[o(f,null,{default:l(()=>[o(h,{cols:"12",md:"3"},{default:l(()=>[o(V,{modelValue:t.pagination.per_page,"onUpdate:modelValue":[e[1]||(e[1]=n=>t.pagination.per_page=n),m.onPerPageChange],items:t.perPageOptions,label:"Items per page","prepend-inner-icon":"mdi-format-list-numbered",variant:"outlined",density:"compact"},null,8,["modelValue","items","onUpdate:modelValue"])]),_:1}),o(h,{cols:"12",md:"2"},{default:l(()=>[o(V,{modelValue:t.categoryFilter,"onUpdate:modelValue":[e[2]||(e[2]=n=>t.categoryFilter=n),m.onFilterChange],items:t.categoryOptions,"item-value":"value","item-title":"label",label:"Category",clearable:"",variant:"outlined",density:"compact"},null,8,["modelValue","items","onUpdate:modelValue"])]),_:1}),o(h,{cols:"12",md:"3"},{default:l(()=>[o(V,{modelValue:t.activeFilter,"onUpdate:modelValue":[e[3]||(e[3]=n=>t.activeFilter=n),m.onFilterChange],items:t.activeOptions,label:"Status",clearable:"",variant:"outlined",density:"compact"},null,8,["modelValue","items","onUpdate:modelValue"])]),_:1}),o(h,{cols:"12",md:"4"},{default:l(()=>[o(_,{modelValue:t.search,"onUpdate:modelValue":[e[4]||(e[4]=n=>t.search=n),m.onSearchChange],label:"Search by name, SKU, barcode","prepend-inner-icon":"mdi-magnify",variant:"outlined",density:"compact",clearable:"",onKeyup:M(m.loadProducts,["enter"])},null,8,["modelValue","onKeyup","onUpdate:modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),o(S,null,{default:l(()=>[o(A,{class:"d-flex justify-space-between align-center"},{default:l(()=>[e[16]||(e[16]=i("span",null,"Products",-1)),i("span",$,[e[15]||(e[15]=c(" Total Records: ")),i("strong",null,d(t.pagination.total||0),1),t.products.length>0?(r(),g("span",ee," | Showing "+d((t.pagination.current_page-1)*t.pagination.per_page+1)+" to "+d(Math.min(t.pagination.current_page*t.pagination.per_page,t.pagination.total))+" of "+d(t.pagination.total),1)):x("",!0)])]),_:1,__:[16]}),o(j,null,{default:l(()=>[t.loading?(r(),g("div",te,[o(P,{indeterminate:"",color:"primary"})])):(r(),v(F,{key:1},{default:l(()=>[i("thead",null,[i("tr",null,[i("th",{class:"sortable",onClick:e[5]||(e[5]=n=>s.sortBy("name"))},[i("div",oe,[e[18]||(e[18]=i("span",null,"Name",-1)),s.isSortingBy("name")?(r(),v(y,{key:0,size:"18",class:"sort-icon active"},{default:l(()=>[c(d(s.getSortDirection("name")==="asc"?"mdi-arrow-up":"mdi-arrow-down"),1)]),_:1})):(r(),v(y,{key:1,size:"18",class:"sort-icon inactive"},{default:l(()=>e[17]||(e[17]=[c(" mdi-unfold-more-horizontal ")])),_:1,__:[17]}))])]),i("th",{class:"sortable",onClick:e[6]||(e[6]=n=>s.sortBy("sku"))},[i("div",se,[e[20]||(e[20]=i("span",null,"SKU",-1)),s.isSortingBy("sku")?(r(),v(y,{key:0,size:"18",class:"sort-icon active"},{default:l(()=>[c(d(s.getSortDirection("sku")==="asc"?"mdi-arrow-up":"mdi-arrow-down"),1)]),_:1})):(r(),v(y,{key:1,size:"18",class:"sort-icon inactive"},{default:l(()=>e[19]||(e[19]=[c(" mdi-unfold-more-horizontal ")])),_:1,__:[19]}))])]),e[29]||(e[29]=i("th",null,"Category",-1)),i("th",{class:"text-end sortable",onClick:e[7]||(e[7]=n=>s.sortBy("purchase_price"))},[i("div",le,[e[22]||(e[22]=i("span",null,"Purchase",-1)),s.isSortingBy("purchase_price")?(r(),v(y,{key:0,size:"18",class:"sort-icon active"},{default:l(()=>[c(d(s.getSortDirection("purchase_price")==="asc"?"mdi-arrow-up":"mdi-arrow-down"),1)]),_:1})):(r(),v(y,{key:1,size:"18",class:"sort-icon inactive"},{default:l(()=>e[21]||(e[21]=[c(" mdi-unfold-more-horizontal ")])),_:1,__:[21]}))])]),i("th",{class:"text-end sortable",onClick:e[8]||(e[8]=n=>s.sortBy("sale_price"))},[i("div",ie,[e[24]||(e[24]=i("span",null,"Sale",-1)),s.isSortingBy("sale_price")?(r(),v(y,{key:0,size:"18",class:"sort-icon active"},{default:l(()=>[c(d(s.getSortDirection("sale_price")==="asc"?"mdi-arrow-up":"mdi-arrow-down"),1)]),_:1})):(r(),v(y,{key:1,size:"18",class:"sort-icon inactive"},{default:l(()=>e[23]||(e[23]=[c(" mdi-unfold-more-horizontal ")])),_:1,__:[23]}))])]),e[30]||(e[30]=i("th",{class:"text-end"},"Total Stock",-1)),i("th",{class:"text-end sortable",onClick:e[9]||(e[9]=n=>s.sortBy("minimum_stock_level"))},[i("div",ae,[e[26]||(e[26]=i("span",null,"Min Stock",-1)),s.isSortingBy("minimum_stock_level")?(r(),v(y,{key:0,size:"18",class:"sort-icon active"},{default:l(()=>[c(d(s.getSortDirection("minimum_stock_level")==="asc"?"mdi-arrow-up":"mdi-arrow-down"),1)]),_:1})):(r(),v(y,{key:1,size:"18",class:"sort-icon inactive"},{default:l(()=>e[25]||(e[25]=[c(" mdi-unfold-more-horizontal ")])),_:1,__:[25]}))])]),i("th",{class:"sortable",onClick:e[10]||(e[10]=n=>s.sortBy("is_active"))},[i("div",ne,[e[28]||(e[28]=i("span",null,"Status",-1)),s.isSortingBy("is_active")?(r(),v(y,{key:0,size:"18",class:"sort-icon active"},{default:l(()=>[c(d(s.getSortDirection("is_active")==="asc"?"mdi-arrow-up":"mdi-arrow-down"),1)]),_:1})):(r(),v(y,{key:1,size:"18",class:"sort-icon inactive"},{default:l(()=>e[27]||(e[27]=[c(" mdi-unfold-more-horizontal ")])),_:1,__:[27]}))])]),e[31]||(e[31]=i("th",null,"Actions",-1))])]),i("tbody",null,[(r(!0),g(O,null,q(t.products,n=>{var U;return r(),g("tr",{key:n.id},[i("td",null,[i("span",re,d(n.name),1)]),i("td",null,d(n.sku||"-"),1),i("td",null,d(((U=n.category)==null?void 0:U.name)||"-"),1),i("td",de,"৳"+d(parseFloat(n.purchase_price||0).toFixed(2)),1),i("td",ue,"৳"+d(parseFloat(n.sale_price||0).toFixed(2)),1),i("td",ce,[o(B,{size:"small",color:m.getStockStatusColor(n),variant:"tonal"},{default:l(()=>[c(d(n.stock_quantity||0),1)]),_:2},1032,["color"]),n.stock_by_warehouse&&n.stock_by_warehouse.length>0?(r(),v(z,{key:0,activator:"parent",location:"top"},{default:l(()=>[i("div",me,[(r(!0),g(O,null,q(n.stock_by_warehouse,a=>(r(),g("div",{key:a.warehouse_id,class:"py-1"},[i("strong",null,d(a.warehouse_name)+":",1),c(" "+d(a.quantity||0),1)]))),128))])]),_:2},1024)):x("",!0)]),i("td",pe,d(n.minimum_stock_level||0),1),i("td",null,[o(B,{size:"small",color:n.is_active?"success":"error",variant:"tonal"},{default:l(()=>[c(d(n.is_active?"Active":"Inactive"),1)]),_:2},1032,["color"])]),i("td",null,[o(b,{icon:"mdi-pencil",variant:"text",size:"small",onClick:a=>m.openDialog(n)},null,8,["onClick"]),o(b,{icon:"mdi-delete",variant:"text",size:"small",color:"error",onClick:a=>m.deleteProduct(n)},null,8,["onClick"])])])}),128)),t.products.length===0?(r(),g("tr",_e,e[32]||(e[32]=[i("td",{colspan:"9",class:"text-center py-4"},"No products found",-1)]))):x("",!0)])]),_:1})),i("div",fe,[i("div",ge,[t.products.length>0&&t.pagination.total>0?(r(),g("span",ve,[e[33]||(e[33]=c(" Showing ")),i("strong",null,d((t.pagination.current_page-1)*t.pagination.per_page+1),1),e[34]||(e[34]=c(" to ")),i("strong",null,d(Math.min(t.pagination.current_page*t.pagination.per_page,t.pagination.total)),1),e[35]||(e[35]=c(" of ")),i("strong",null,d(t.pagination.total.toLocaleString()),1),e[36]||(e[36]=c(" records ")),t.pagination.last_page>1?(r(),g("span",ye," (Page "+d(t.pagination.current_page)+" of "+d(t.pagination.last_page)+") ",1)):x("",!0)])):(r(),g("span",he," No records found "))]),t.pagination.last_page>1?(r(),g("div",ke,[o(C,{modelValue:t.pagination.current_page,"onUpdate:modelValue":[e[11]||(e[11]=n=>t.pagination.current_page=n),m.loadProducts],length:t.pagination.last_page,"total-visible":7,density:"comfortable"},null,8,["modelValue","length","onUpdate:modelValue"])])):x("",!0)])]),_:1})]),_:1}),o(D,{modelValue:t.dialog,"onUpdate:modelValue":e[12]||(e[12]=n=>t.dialog=n),product:t.editingProduct,onSaved:m.loadProducts},null,8,["modelValue","product","onSaved"])])}const Ve=E(X,[["render",be],["__scopeId","data-v-19f3d540"]]);export{Ve as default};
